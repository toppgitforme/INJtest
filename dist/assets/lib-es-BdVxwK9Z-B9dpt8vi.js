var C=Object.create,O=Object.defineProperty,S=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,p=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,v=(e,r)=>function(){return r||(0,e[T(e)[0]])((r={exports:{}}).exports,r),r.exports},R=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(var n=T(r),s=0,a=n.length,_;s<a;s++)_=n[s],!d.call(e,_)&&_!==t&&O(e,_,{get:(A=>r[A]).bind(null,_),enumerable:!(o=S(r,_))||o.enumerable});return e},h=(e,r,t)=>(t=e!=null?C(p(e)):{},R(!e||!e.__esModule?O(t,"default",{value:e,enumerable:!0}):t,e)),M=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Calling `require` for "'+e+"\" in an environment that doesn't expose the `require` function.")});const L={},N=(e,r)=>{L[e]=r},E=e=>{class r extends Error{cause;constructor(o,n,s){if(super(o||e,s),Object.setPrototypeOf(this,r.prototype),this.name=e,n)for(const a in n)this[a]=n[a];if(s&&P(s)&&"cause"in s&&!this.cause){const a=s.cause;this.cause=a,"stack"in a&&(this.stack=this.stack+`
CAUSE: `+a.stack)}}}return r};function P(e){return typeof e=="object"}const b=E("DisconnectedDevice"),F=E("DisconnectedDeviceDuringOperation"),g=E("UserRefusedOnDevice"),V=E("TransportOpenUserCancelled"),y=E("TransportInterfaceNotAvailable"),G=E("TransportRaceCondition"),x=E("TransportWebUSBGestureRequired");var i;(function(e){e.Unknown="Unknown",e.LocationServicesDisabled="LocationServicesDisabled",e.LocationServicesUnauthorized="LocationServicesUnauthorized",e.BluetoothScanStartFailed="BluetoothScanStartFailed"})(i||(i={}));var l=class extends Error{id;constructor(e,r){const t="TransportError";super(e||t),this.name=t,this.message=e,this.stack=new Error(e).stack,this.id=r}};N("TransportError",e=>new l(e.message,e.id));const c={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function f(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}var I=class u extends Error{statusCode;statusText;constructor(r,{canBeMappedToChildError:t=!0}={}){const o=Object.keys(c).find(s=>c[s]===r)||"UNKNOWN_ERROR",n=`Ledger device: ${f(r)||o} (0x${r.toString(16)})`;if(super(n),this.name="TransportStatusError",this.statusCode=r,this.statusText=o,Object.setPrototypeOf(this,u.prototype),t&&r===c.LOCKED_DEVICE)return new U(n)}},U=class D extends I{constructor(r){super(c.LOCKED_DEVICE,{canBeMappedToChildError:!1}),r&&(this.message=r),this.name="LockedDeviceError",Object.setPrototypeOf(this,D.prototype)}};N("TransportStatusError",e=>new I(e.statusCode));export{F as D,c as S,x as T,g as U,h as _,v as a,V as b,y as c,b as d,l as e,I as f,G as g,E as h,M as i};
