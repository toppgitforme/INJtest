const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OrderBook-RuvLI20C.js","assets/icons-Dj0zHVqu.js","assets/react-vendor-DlFGVz-3.js","assets/injective-sdk-yGcRIHv8.js","assets/injective-utils-C9MYzl-J.js","assets/injective-networks-BywkriB7.js","assets/wallet-strategy-BHfoxPqK.js","assets/wallet-core-CdETWVBX.js","assets/TradingView-DZLiuVuL.js","assets/GridBotPanel-CP_babd_.js","assets/ActiveBots-DL9Ymhgy.js","assets/GridLevelsTable-CEN3CXKs.js","assets/WalletModal-B6xxOxi5.js"])))=>i.map(i=>d[i]);
import{r as o,Z as G,W as Z,T as W,j as Y,k as X,A as ee}from"./icons-Dj0zHVqu.js";import{r as te}from"./react-vendor-DlFGVz-3.js";import{bM as U,aE as se,bN as R,bO as D,bP as B,b5 as j}from"./injective-sdk-yGcRIHv8.js";import{a as L,N as M}from"./injective-networks-BywkriB7.js";import{E as re,C as ae}from"./injective-utils-C9MYzl-J.js";import{W as ne}from"./wallet-strategy-BHfoxPqK.js";import{p as oe}from"./wallet-core-CdETWVBX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();var q={exports:{}},k={};var ie=o,ce=Symbol.for("react.element"),le=Symbol.for("react.fragment"),de=Object.prototype.hasOwnProperty,ue=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,me={key:!0,ref:!0,__self:!0,__source:!0};function H(i,t,s){var a,r={},n=null,c=null;s!==void 0&&(n=""+s),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(c=t.ref);for(a in t)de.call(t,a)&&!me.hasOwnProperty(a)&&(r[a]=t[a]);if(i&&i.defaultProps)for(a in t=i.defaultProps,t)r[a]===void 0&&(r[a]=t[a]);return{$$typeof:ce,type:i,key:n,ref:c,props:r,_owner:ue.current}}k.Fragment=le;k.jsx=H;k.jsxs=H;q.exports=k;var e=q.exports,z,$=te;z=$.createRoot,$.hydrateRoot;function fe({address:i,onConnect:t,onDisconnect:s}){return e.jsxs("header",{className:"relative overflow-hidden border-b border-[#2F2F2F]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#9E7FFF]/10 via-[#38bdf8]/10 to-[#f472b6]/10 animate-pulse-slow"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[#9E7FFF] blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-br from-[#9E7FFF] to-[#38bdf8] p-3 rounded-2xl",children:e.jsx(G,{className:"w-8 h-8 text-white",strokeWidth:2.5})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#9E7FFF] via-[#38bdf8] to-[#f472b6] bg-clip-text text-transparent",children:"Infinity Grid Bot"}),e.jsx("p",{className:"text-[#A3A3A3] text-sm mt-1",children:"Automated Trading on Injective"})]})]}),e.jsx("button",{onClick:i?s:t,className:"group relative px-6 py-3 bg-gradient-to-r from-[#9E7FFF] to-[#38bdf8] rounded-xl font-semibold transition-all duration-300 hover:shadow-lg hover:shadow-[#9E7FFF]/50 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:i?`${i.slice(0,6)}...${i.slice(-4)}`:"Connect Wallet"})]})})]})})]})}function V(){const[i,t]=o.useState([]),[s,a]=o.useState(!0),[r,n]=o.useState(null);return o.useEffect(()=>{(async()=>{try{const d=L(M.Mainnet),f=new U(d.indexer),{markets:u}=await f.fetchMarkets(),m=u.filter(l=>l.quoteToken?.symbol==="USDT"||l.quoteToken?.symbol==="USDC").slice(0,10).map(l=>({marketId:l.marketId,baseSymbol:l.baseToken?.symbol||"UNKNOWN",quoteSymbol:l.quoteToken?.symbol||"UNKNOWN",ticker:l.ticker||`${l.baseToken?.symbol}/${l.quoteToken?.symbol}`}));t(m),a(!1)}catch{n("Failed to fetch markets"),a(!1),t([{marketId:"0x0611780ba69656949525013d947713300f56c37b6175e02f26bffa495c3208fe",baseSymbol:"INJ",quoteSymbol:"USDT",ticker:"INJ/USDT"}])}})()},[]),{markets:i,isLoading:s,error:r}}const pe={price:"0.00",change24h:"0.00",high24h:"0.00",low24h:"0.00",volume24h:"0",lastUpdate:Date.now()};function J(i){const[t,s]=o.useState(pe),[a,r]=o.useState(!0);return o.useEffect(()=>{if(!i){r(!1);return}let n;const c=async()=>{try{const d=L(M.Mainnet),u=await new U(d.indexer).fetchMarket(i);u&&s({price:u.price||"0.00",change24h:u.changePercentage||"0.00",high24h:u.high||"0.00",low24h:u.low||"0.00",volume24h:u.volume||"0",lastUpdate:Date.now()}),r(!1)}catch{r(!1)}};return c(),n=setInterval(c,5e3),()=>{n&&clearInterval(n)}},[i]),{priceData:t,isLoading:a}}const he=({marketId:i,pair:t})=>{const{priceData:s}=J(i),a=parseFloat(s.change24h)>=0;return e.jsxs("div",{className:"flex items-center space-x-3 min-w-fit",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:t}),e.jsxs("span",{className:"text-sm text-[#A3A3A3]",children:["$",parseFloat(s.price).toFixed(4)]}),e.jsxs("div",{className:`flex items-center space-x-1 ${a?"text-[#10b981]":"text-[#ef4444]"}`,children:[a?e.jsx(W,{size:14}):e.jsx(Y,{size:14}),e.jsxs("span",{className:"text-sm font-medium",children:[a?"+":"",parseFloat(s.change24h).toFixed(2),"%"]})]})]})},xe=()=>{const{markets:i,isLoading:t}=V();return t?e.jsx("div",{className:"bg-[#262626] border-b border-[#2F2F2F]",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsx("div",{className:"text-sm text-[#A3A3A3] animate-pulse",children:"Loading markets..."})})}):e.jsx("div",{className:"bg-[#262626] border-b border-[#2F2F2F] overflow-hidden",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsx("div",{className:"flex items-center space-x-8 overflow-x-auto scrollbar-hide",children:i.slice(0,5).map(s=>e.jsx(he,{marketId:s.marketId,pair:`${s.baseSymbol}/${s.quoteSymbol}`},s.marketId))})})})};function I({title:i,value:t,change:s,icon:a,trend:r}){const n=r==="up"?"text-[#10b981]":r==="down"?"text-[#ef4444]":"text-[#A3A3A3]";return e.jsxs("div",{className:"gradient-border p-6 hover:scale-105 transition-transform duration-300",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-[#9E7FFF] to-[#38bdf8]",children:e.jsx(a,{className:"w-6 h-6 text-white",strokeWidth:2})})}),e.jsx("div",{className:"text-[#A3A3A3] text-sm mb-1",children:i}),e.jsx("div",{className:"text-2xl font-bold mb-2",children:t}),e.jsx("div",{className:`text-sm font-semibold ${n}`,children:s})]})}const ge="https://sentry.evm-rpc.injective.network/",C=new ne({chainId:ae.Mainnet,evmOptions:{rpcUrl:ge,evmChainId:re.Mainnet},strategies:{}}),ve=()=>{const[i,t]=o.useState({address:"",balance:"0",isConnected:!1}),[s,a]=o.useState(!1),r=o.useMemo(()=>i.address?se(i.address):"",[i.address]),n=o.useCallback(async d=>{a(!0);try{C.setWallet(d);const f=await C.getAddresses();t({address:f[0],balance:"0",isConnected:!0})}catch(f){throw f}finally{a(!1)}},[]),c=o.useCallback(()=>{t({address:"",balance:"0",isConnected:!1})},[]);return{walletState:i,injectiveAddress:r,connect:n,disconnect:c,isConnecting:s,walletStrategy:C}};class be{msgBroadcaster;walletStrategy;network;constructor(t,s=M.Mainnet){this.walletStrategy=t,this.network=s,this.msgBroadcaster=new oe({walletStrategy:t,simulateTx:!0,network:s,endpoints:L(s),gasBufferCoefficient:1.2})}calculateGridLevels(t){const{upperPrice:s,lowerPrice:a,gridLevels:r,investmentAmount:n}=t,c=(s-a)/(r-1),d=n/r;return Array.from({length:r},(f,u)=>({id:`grid-${u}`,price:a+c*u,buyAmount:d,sellAmount:d,status:"pending"}))}async placeGridOrders(t,s,a,r,n,c){const d=[];try{const f=s.slice(0,Math.floor(s.length/2));for(const m of f){const l=R.fromJSON({marketId:r,injectiveAddress:a,orderType:1,price:B({value:m.price,baseDecimals:n,quoteDecimals:c}),quantity:D({value:m.buyAmount/m.price,baseDecimals:n})}),x=await this.msgBroadcaster.broadcast({msgs:l,injectiveAddress:a});x.txHash&&d.push(x.txHash)}const u=s.slice(Math.floor(s.length/2));for(const m of u){const l=R.fromJSON({marketId:r,injectiveAddress:a,orderType:2,price:B({value:m.price,baseDecimals:n,quoteDecimals:c}),quantity:D({value:m.sellAmount/m.price,baseDecimals:n})}),x=await this.msgBroadcaster.broadcast({msgs:l,injectiveAddress:a});x.txHash&&d.push(x.txHash)}return d}catch(f){throw f}}async cancelAllOrders(t,s,a){}}const ye=({walletStrategy:i,injectiveAddress:t})=>{const[s,a]=o.useState({upperPrice:26,lowerPrice:23,gridLevels:10,investmentAmount:1e3,tradingPair:"INJ/USDT"}),[r,n]=o.useState([]),[c,d]=o.useState(!1),[f,u]=o.useState(!1),[m,l]=o.useState([]),[x,h]=o.useState(null),[E,_]=o.useState({totalProfit:0,totalTrades:0,winRate:0,activeGrids:0,runningTime:0}),[g]=o.useState(()=>new be(i)),w=o.useCallback(p=>g.calculateGridLevels(p),[g]),F=o.useCallback(async()=>{if(!t){h("Please connect your wallet first");return}if(s.upperPrice<=s.lowerPrice){h("Upper price must be greater than lower price");return}if(s.investmentAmount<=0){h("Investment amount must be greater than 0");return}u(!0),h(null);try{const p=w(s);n(p);const N=await g.placeGridOrders(s,p,t,"0x0611780ba69656949525013d947713300f56c37b6175e02f26bffa495c3208fe",18,6);l(N),d(!0),n(O=>O.map(y=>({...y,status:"active"}))),P()}catch(p){h(p instanceof Error?p.message:"Failed to start grid bot"),d(!1)}finally{u(!1)}},[s,t,w,g]),A=o.useCallback(async()=>{try{m.length>0&&await g.cancelAllOrders(t,"0x0611780ba69656949525013d947713300f56c37b6175e02f26bffa495c3208fe",m),d(!1),l([]),n([]),h(null)}catch(p){h(p instanceof Error?p.message:"Failed to stop grid bot")}},[m,t,g]),P=o.useCallback(()=>{const p=setInterval(()=>{n(S=>{const v=[...S],T=v.filter(N=>N.status==="active");if(T.length>0&&Math.random()>.7){const N=Math.floor(Math.random()*T.length),O=T[N],y=v.findIndex(b=>b.id===O.id);y!==-1&&(v[y].status="filled",v[y].profit=Math.random()*10,_(b=>({...b,totalProfit:b.totalProfit+(v[y].profit||0),totalTrades:b.totalTrades+1,winRate:(b.totalTrades+1)/(b.totalTrades+1)*100,activeGrids:v.filter(Q=>Q.status==="active").length})))}return v})},5e3);return()=>clearInterval(p)},[]);return o.useEffect(()=>{if(c){const p=setInterval(()=>{_(S=>({...S,runningTime:S.runningTime+1}))},1e3);return()=>clearInterval(p)}},[c]),{config:s,setConfig:a,gridLevels:r,isRunning:c,isStarting:f,stats:E,error:x,startBot:F,stopBot:A}},je=o.lazy(()=>j(()=>import("./OrderBook-RuvLI20C.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),we=o.lazy(()=>j(()=>import("./TradingView-DZLiuVuL.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))),Se=o.lazy(()=>j(()=>import("./GridBotPanel-CP_babd_.js"),__vite__mapDeps([9,1,2,3,4,5,6,7]))),Ne=o.lazy(()=>j(()=>import("./ActiveBots-DL9Ymhgy.js"),__vite__mapDeps([10,1,2,3,4,5,6,7]))),_e=o.lazy(()=>j(()=>import("./GridLevelsTable-CEN3CXKs.js"),__vite__mapDeps([11,1,2,3,4,5,6,7]))),Te=o.lazy(()=>j(()=>import("./WalletModal-B6xxOxi5.js"),__vite__mapDeps([12,7,3,4,1,5,2,6])));function Ie(){const[i,t]=o.useState(!1),{walletState:s,injectiveAddress:a,connect:r,disconnect:n,isConnecting:c,walletStrategy:d}=ve(),{config:f,setConfig:u,gridLevels:m,isRunning:l,isStarting:x,stats:h,error:E,startBot:_,stopBot:g}=ye({walletStrategy:d,injectiveAddress:a}),{currentPrice:w}=J(),{markets:F}=V(),A=async P=>{try{await r(P),t(!1)}catch{}};return e.jsxs("div",{className:"min-h-screen bg-[#171717]",children:[e.jsx(fe,{address:s.address,onConnect:()=>t(!0),onDisconnect:n}),e.jsx(xe,{markets:F}),e.jsxs("main",{className:"max-w-[1920px] mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(I,{title:"Total Profit",value:`$${h.totalProfit.toFixed(2)}`,change:"+12.5%",icon:W,trend:"up"}),e.jsx(I,{title:"Active Grids",value:h.activeGrids.toString(),change:`${m.length} total`,icon:X,trend:"neutral"}),e.jsx(I,{title:"Total Trades",value:h.totalTrades.toString(),change:`${h.winRate.toFixed(1)}% win rate`,icon:ee,trend:"up"}),e.jsx(I,{title:"Running Time",value:`${Math.floor(h.runningTime/60)}m ${h.runningTime%60}s`,change:l?"Active":"Stopped",icon:G,trend:l?"up":"neutral"})]}),e.jsxs(o.Suspense,{fallback:e.jsx("div",{className:"text-center py-8",children:"Loading..."}),children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(we,{currentPrice:w}),e.jsx(je,{})]}),e.jsx("div",{children:e.jsx(Se,{address:s.address,onStart:_,onStop:g,isRunning:l,isStarting:x,error:E,config:f,onConfigChange:u})})]}),m.length>0&&e.jsx("div",{className:"mb-8",children:e.jsx(_e,{levels:m,currentPrice:w})}),e.jsx(Ne,{isRunning:l,config:f,stats:h}),e.jsx(Te,{isOpen:i,onClose:()=>t(!1),onSelectWallet:A,isConnecting:c})]})]})]})}const K=document.getElementById("root");if(!K)throw new Error("Root element not found");z(K).render(e.jsx(o.StrictMode,{children:e.jsx(Ie,{})}));export{e as j};
